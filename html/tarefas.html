<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Produtivus — Tarefas</title>
  <meta name="app-version" content="20250823T0000">
  <meta name="description" content="Gerencie suas tarefas e aulas. Crie, edite, conclua e visualize pendências e concluídas.">
  <link rel="stylesheet" href="../css/app.css?v=2">
  <link rel="icon" href="../img/icone.png" type="image/png">
  <link rel="apple-touch-icon" href="../img/icone.png">
</head>

<body class="page-animate pagina-tarefas">
  <div id="header-container" class="container-fluid p-0"></div>
  <main id="main-content" class="app-main">
    <header class="page-header page-header--band cabecalho-page">
      <h1 class="page-header__title">
        Tarefas
        <span class="page-header__icon" aria-hidden="true">
          <span class="material-symbols-outlined">checklist</span>
        </span>
      </h1>
      <p class="page-header__subtitle">Planeje seu dia com tarefas, subtarefas, aulas e horários.</p>
      <div class="page-header__actions flexo gap-sm">
        <button type="button" class="botao botao--secundario" id="btn-add-lesson" title="Criar aulas (curso/matéria)">+ Adicionar aula</button>
        <button type="button" class="botao botao--primario" id="btn-add-task" title="Criar nova tarefa">+ Nova tarefa</button>
      </div>
    </header>

     <div class="page-shell py-4 py-md-5">
      <section class="page-section main-container-tasks-pendentes mb-5">
        <div class="tasks-info mb-3">
          <h2 class="tasks-title h4 mb-1">Tarefas Pendentes</h2>
          <p class="tasks-desc text-muted mb-0">Estas são as tarefas que você ainda precisa concluir.</p>
        </div>
        <div class="cards-grid cards-pendentes" id="cards-pendentes"></div>
      </section>
      <section class="page-section main-container-tasks-pendentes">
        <div class="tasks-info mb-3">
          <h2 class="tasks-title h4 mb-1">Tarefas Concluídas</h2>
          <p class="tasks-desc text-muted mb-0">Estas são as tarefas que você já finalizou.</p>
        </div>
        <div class="cards-grid cards-feitas" id="cards-feitas"></div>
      </section>
    </div><!-- conteúdo da página continua aqui ... -->
  </main>

  <!-- Modal Nova Tarefa (refatorada para sistema .janela) -->
  <div class="janela janela--media" id="taskModal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="tm-title" data-modal="custom">
    <div class="janela__caixa">
      <div class="janela__cabecalho">
        <h2 class="janela__titulo" id="tm-title">Nova Tarefa</h2>
        <button type="button" id="close-task-modal" class="janela__fechar" aria-label="Fechar" data-fechar>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="janela__corpo">
        <form id="task-form" class="formulario formulario--denso">
          <div class="linha-campos">
            <div class="campo campo--flex-2">
              <label for="task-title" class="campo__rotulo">Título</label>
              <div class="campo__controle">
                <input type="text" id="task-title" name="title" class="campo__entrada" required>
              </div>
            </div>
            <div class="campo campo--w-130">
              <label for="task-color" class="campo__rotulo">Cor</label>
              <div class="campo__controle">
                <input type="color" id="task-color" name="color" value="#E0B33A" class="campo__entrada entrada--cor-pequena">
              </div>
            </div>
          </div>
          <div class="linha-campos">
            <div class="campo">
              <label for="task-start" class="campo__rotulo">Início</label>
              <div class="campo__controle"><input type="datetime-local" id="task-start" name="start" class="campo__entrada"></div>
            </div>
            <div class="campo">
              <label for="task-end" class="campo__rotulo">Término</label>
              <div class="campo__controle"><input type="datetime-local" id="task-end" name="end" class="campo__entrada"></div>
            </div>
          </div>
          <div class="campo">
            <label for="task-desc" class="campo__rotulo">Descrição</label>
            <div class="campo__controle">
              <textarea id="task-desc" name="description" class="campo__entrada" rows="3"></textarea>
            </div>
          </div>
          <div class="campo">
            <label class="campo__rotulo">Subtarefas</label>
            <div id="subtasks-list" class="lista-subtarefas"></div>
            <button type="button" id="btn-add-subtask" class="botao botao--secundario botao--pequeno botao--alinha-inicio">+ Adicionar subtarefa</button>
          </div>
          <div class="mensagem-erro" id="task-form-error"></div>
        </form>
      </div>
      <div class="janela__acoes">
        <button type="submit" class="botao botao--primario" form="task-form">Salvar</button>
      </div>
    </div>
  </div>

  <!-- Modal Aula (refatorada) -->
  <div class="janela janela--media" id="lessonModal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="lm-title" data-modal="custom">
    <div class="janela__caixa">
      <div class="janela__cabecalho">
        <h2 class="janela__titulo" id="lm-title">Adicionar Aula</h2>
        <button type="button" id="close-lesson-modal" class="janela__fechar" aria-label="Fechar" data-fechar>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="janela__corpo">
        <form id="lesson-form" class="formulario formulario--denso">
          <div class="linha-campos">
            <div class="campo campo--flex-2">
              <label for="lesson-title" class="campo__rotulo">Título</label>
              <div class="campo__controle"><input type="text" id="lesson-title" required class="campo__entrada"></div>
            </div>
            <div class="campo campo--w-130">
              <label for="lesson-color" class="campo__rotulo">Cor</label>
              <div class="campo__controle"><input type="color" id="lesson-color" value="#E0B33A" class="campo__entrada entrada--cor-pequena"></div>
            </div>
          </div>
          <div class="linha-campos">
            <div class="campo">
              <label for="lesson-course" class="campo__rotulo">Curso</label>
              <div class="campo__controle">
                <select id="lesson-course" class="campo__entrada"><option value="">-- Selecione --</option></select>
                <button type="button" id="btn-lesson-add-course" class="campo__acao" title="Novo curso">+</button>
              </div>
            </div>
            <div class="campo">
              <label for="lesson-subject" class="campo__rotulo">Matéria</label>
              <div class="campo__controle">
                <select id="lesson-subject" class="campo__entrada"><option value="">Selecione um curso…</option></select>
                <button type="button" id="btn-lesson-add-subject" class="campo__acao" title="Nova matéria">+</button>
              </div>
            </div>
            <div class="campo campo--w-140">
              <label for="lesson-duration" class="campo__rotulo">Duração (min)</label>
              <div class="campo__controle"><input type="number" id="lesson-duration" min="0" step="5" placeholder="25" class="campo__entrada"></div>
            </div>
          </div>
          <div class="linha-campos">
            <div class="campo">
              <label for="lesson-start-date" class="campo__rotulo">Período: início</label>
              <div class="campo__controle"><input type="date" id="lesson-start-date" class="campo__entrada"></div>
            </div>
            <div class="campo">
              <label for="lesson-end-date" class="campo__rotulo">Período: término</label>
              <div class="campo__controle"><input type="date" id="lesson-end-date" class="campo__entrada"></div>
            </div>
            <div class="campo">
              <label for="lesson-time" class="campo__rotulo">Horário</label>
              <div class="campo__controle"><input type="time" id="lesson-time" class="campo__entrada"></div>
            </div>
            <div class="campo">
              <label for="lesson-end-time" class="campo__rotulo">Fim (opcional)</label>
              <div class="campo__controle"><input type="time" id="lesson-end-time" class="campo__entrada"></div>
            </div>
          </div>
          <div class="campo linha--mt-xs">
            <label class="campo__rotulo">Dias da semana</label>
            <div class="pills-semana" id="lesson-weekdays">
              <label class="pilula-semana"><input type="checkbox" data-dow="0" /> D</label>
              <label class="pilula-semana"><input type="checkbox" data-dow="1" /> S</label>
              <label class="pilula-semana"><input type="checkbox" data-dow="2" /> T</label>
              <label class="pilula-semana"><input type="checkbox" data-dow="3" /> Q</label>
              <label class="pilula-semana"><input type="checkbox" data-dow="4" /> Q</label>
              <label class="pilula-semana"><input type="checkbox" data-dow="5" /> S</label>
              <label class="pilula-semana"><input type="checkbox" data-dow="6" /> S</label>
            </div>
            <p class="campo__ajuda ajuda--topo-sm">D=Dom, S=Seg, T=Ter, Q=Qua/Qui, S=Sex/Sáb</p>
          </div>
          <div class="mensagem-erro" id="lesson-form-error"></div>
        </form>
      </div>
      <div class="janela__acoes">
        <button type="submit" class="botao botao--primario" form="lesson-form">Criar aulas</button>
      </div>
    </div>
  </div>

  <!-- Modal Detalhes Tarefa (refatorada) -->
  <div class="janela janela--media" id="taskDetailsModal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="td-title" data-modal="custom">
    <div class="janela__caixa">
      <div class="janela__cabecalho">
        <h2 class="janela__titulo" id="td-title">Detalhes da Tarefa</h2>
        <button type="button" id="close-task-details" class="janela__fechar" aria-label="Fechar" data-fechar>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="janela__corpo">
        <div class="flexo justifica-fim gap-sm mb-sm">
          <button type="button" class="botao botao--secundario botao--pequeno" id="td-edit">Editar</button>
        </div>
        <div class="janela__linha">
          <div class="janela__coluna">
            <div class="campo mb-sm">
              <span class="campo__rotulo">Período</span>
              <div id="td-dates">-</div>
            </div>
          </div>
          <div class="janela__coluna">
            <div class="campo mb-sm">
              <span class="campo__rotulo">Próxima</span>
              <div id="td-next">-</div>
            </div>
          </div>
        </div>
        <div id="td-schedule-row" class="campo esconde mb-sm">
          <span class="campo__rotulo">Cronograma</span>
          <div id="td-schedule">-</div>
        </div>
        <div class="janela__linha">
          <div class="janela__coluna">
            <div class="campo mb-sm"><span class="campo__rotulo">Curso</span><div id="td-course">-</div></div>
          </div>
          <div class="janela__coluna">
            <div class="campo mb-sm"><span class="campo__rotulo">Matéria</span><div id="td-subject">-</div></div>
          </div>
        </div>
        <div class="campo mb-sm"><span class="campo__rotulo">Duração</span><div id="td-duration">-</div></div>
        <div class="campo mb-sm"><span class="campo__rotulo">Descrição</span><div id="td-desc" class="text-prewrap">-</div></div>
        <div class="campo mb-sm"><span class="campo__rotulo">Subtarefas</span><ul id="td-subtasks" class="m-0 ps-3"></ul></div>
        <div class="campo mb-0"><span class="campo__rotulo">Série</span><div id="td-series">-</div></div>
      </div>
      <div class="janela__acoes">
        <button type="button" class="botao botao--secundario" data-fechar>Fechar</button>
      </div>
    </div>
  </div>

  <main id="main-content" class="pb-5">

  </main>

  <div id="footer-container"></div>
  <script src="../js/modules/error-handler.js?v=202509151726" defer></script>
  <script src="../js/modules/route-guard.js?v=202509151726" defer></script>
  <script src="../js/protect.js?v=202509151726" defer></script>
  <script src="../js/modules/ui.js?v=20250826T0000" defer></script>
  <script src="../js/modules/study.js?v=20250826T0000" defer></script>
  <script src="../js/modules/tasks/tasks.js?v=202509280525" defer></script>
  <script src="../js/config/api-endpoints.js"></script>
  <script src="../js/modules/header.js?v=20250923" defer></script>
  <script src="../js/modules/footer.js?v=20250923" defer></script>
  <script src="../js/modules/login-modal.js" defer></script>
  <script src="../js/main.js?v=20250823T0000" defer></script>
  <script src="../js/debug/session-debug.js?v=20250823T0000" defer></script>
  <!-- bootstrap-shim removido -->
  <script>document.addEventListener('DOMContentLoaded',function(){ document.body.classList.add('is-ready'); });</script>
</body>

</html>
